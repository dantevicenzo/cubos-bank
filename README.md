![](https://i.imgur.com/xG74tOh.png)

<p align="center">
  <img alt="GitHub language count" src="https://img.shields.io/github/languages/count/dantevicenzo/cubos-bank-api?color=%2304D361">

  <img alt="Repository size" src="https://img.shields.io/github/repo-size/dantevicenzo/cubos-bank-api">
  
  <a href="https://github.com/dantevicenzo/cubos-bank-api/commits/main">
    <img alt="GitHub last commit" src="https://img.shields.io/github/last-commit/dantevicenzo/cubos-bank-api">
  </a>
  
  <img alt="License" src="https://img.shields.io/badge/license-MIT-brightgreen">
  
   <a href="https://cubos.academy/">
    <img alt="Feito por Dante Vicenzo" src="https://img.shields.io/badge/feito-por%20Dante%20Vicenzo-D818A5">
   </a>
   
   <a href="https://github.com/dantevicenzo/cubos-bank-api/stargazers">
    <img alt="Stargazers" src="https://img.shields.io/github/stars/dantevicenzo/cubos-bank-api?style=social">
  </a>
  
   <a href="https://www.twitter.com/dantevicenzo/">
    <img alt="Siga no Twitter" src="https://img.shields.io/twitter/url?url=https%3A%2F%2Fgithub.com%2Fdantevicenzo%2Fcubos-bank-api">
  </a>
  
 
</p>

<h1 align="center"></h1>

<h4 align="center"> 
	üöß Cubos Bank üöß
</h4>

<p align="center">
	<img alt="Status Conclu√≠do" src="https://img.shields.io/badge/STATUS-CONCLU%C3%8DDO-brightgreen">
</p>

<p align="center">
 <a href="#-sobre-o-projeto">Sobre</a> ‚Ä¢
 <a href="#-funcionalidades">Funcionalidades</a> ‚Ä¢
 <a href="#-como-executar-o-projeto">Como executar</a> ‚Ä¢ 
 <a href="#-tecnologias">Tecnologias</a> ‚Ä¢ 
 <a href="#-contribuidores">Contribuidores</a> ‚Ä¢ 
 <a href="#-autor">Autor</a> ‚Ä¢ 
 <a href="#user-content--licen√ßa">Licen√ßa</a>
</p>


## üíª Sobre o projeto

üìÑ Cubos Bank - √© uma API REST de sistema banc√°rio.


Projeto desenvolvido como desafio de c√≥digo no m√≥dulo 2 da **[Turma 07]** de [ [Desenvolvimento de Software](https://cubos.academy/cursos/desenvolvimento-de-software-v2) | [On Demand](https://cubos.academy/cubosondemand) ] oferecida pela [Cubos Academy](https://cubos.academy/).

---

## ‚öôÔ∏è Funcionalidades

- [x] Criar conta banc√°ria
- [x] Listar contas banc√°rias
- [x] Atualizar os dados do usu√°rio da conta banc√°ria
- [x] Excluir uma conta banc√°ria
- [x] Dep√≥sitar em uma conta banc√°ria
- [x] Sacar de uma conta banc√°ria
- [x] Transferir valores entre contas banc√°rias
- [x] Consultar saldo da conta banc√°ria
- [x] Emitir extrato banc√°rio
---

## üõ£Ô∏è Como executar o projeto

üí°Este projeto consiste apenas no Backend (pasta server).

### Pr√©-requisitos

Antes de come√ßar, voc√™ vai precisar ter instalado em sua m√°quina as seguintes ferramentas:
[Git](https://git-scm.com), [Node.js](https://nodejs.org/en/). 
Al√©m disto √© bom ter um editor para trabalhar com o c√≥digo como [VSCode](https://code.visualstudio.com/)

#### üé≤ Rodando o Backend (servidor)

```bash

# Clone este reposit√≥rio
$ git clone git@github.com:dantevicenzo/cubos-bank-api.git

# Acesse a pasta do projeto no terminal/cmd
$ cd cubos-bank-api

# Instale as depend√™ncias
$ npm install

# Execute a aplica√ß√£o em modo de desenvolvimento
$ npm run dev

# O servidor inciar√° na porta:3000 - acesse http://localhost:3000 

```
<p align="center">
  <a href="https://github.com/dantevicenzo/cubos-bank-api" target="_blank"><img src="https://insomnia.rest/images/run.svg" alt="Run in Insomnia"></a>
</p>


#### üß≠ Testando as rotas (endpoints)

##### `Live server base url`: https://cubos-bank-api.onrender.com/
##### `Development server base url`: http://localhost:3000/

### Listar contas banc√°rias

#### `GET` `/contas?senha_banco=Cubos123Bank`

Esse endpoint dever√° listar todas as contas banc√°rias existentes.

-   Voc√™ dever√°, **OBRIGATORIAMENTE**:

    -   Verificar se a senha do banco foi informada (passado como query params na url)
    -   Validar se a senha do banco est√° correta

-   **Requisi√ß√£o** - query params (respeitando este nome)

    -   senha_banco

-   **Resposta**
    -   listagem de todas as contas banc√°rias existentes

#### Exemplo de resposta

```javascript
// HTTP Status 200 / 201 / 204
// 2 contas encontradas
[
    {
        "numero": "1",
        "saldo": 0,
        "usuario": {
            "nome": "Foo Bar",
            "cpf": "00011122233",
            "data_nascimento": "2021-03-15",
            "telefone": "71999998888",
            "email": "foo@bar.com",
            "senha": "1234"
        }
    },
    {
        "numero": "2",
        "saldo": 1000,
        "usuario": {
            "nome": "Foo Bar 2",
            "cpf": "00011122234",
            "data_nascimento": "2021-03-15",
            "telefone": "71999998888",
            "email": "foo@bar2.com",
            "senha": "12345"
        }
    }
]

// nenhuma conta encontrada
[]
```
```javascript
// HTTP Status 400 / 401 / 403 / 404
{
    "mensagem": "A senha do banco informada √© inv√°lida!"
}
```

### Criar conta banc√°ria

#### `POST` `/contas`

Esse endpoint dever√° criar uma conta banc√°ria, onde ser√° gerado um n√∫mero √∫nico para identifica√ß√£o da conta (n√∫mero da conta).

-   Voc√™ dever√°, **OBRIGATORIAMENTE**:

    -   Criar uma nova conta cujo n√∫mero √© √∫nico
    -   CPF deve ser um campo √∫nico.
    -   E-mail deve ser um campo √∫nico.
    -   Verificar se todos os campos foram informados (todos s√£o obrigat√≥rios)
    -   Definir o saldo inicial da conta como 0

-   **Requisi√ß√£o** - O corpo (body) dever√° possuir um objeto com as seguintes propriedades (respeitando estes nomes):

    -   nome
    -   cpf
    -   data_nascimento
    -   telefone
    -   email
    -   senha

-   **Resposta**

    Em caso de **sucesso**, n√£o deveremos enviar conte√∫do no corpo (body) da resposta.  
    Em caso de **falha na valida√ß√£o**, a resposta dever√° possuir ***status code*** apropriado, e em seu corpo (body) dever√° possuir um objeto com uma propriedade **mensagem** que dever√° possuir como valor um texto explicando o motivo da falha.

#### Exemplo de Requisi√ß√£o

```javascript
// POST /contas
{
    "nome": "Foo Bar 2",
    "cpf": "00011122234",
    "data_nascimento": "2021-03-15",
    "telefone": "71999998888",
    "email": "foo@bar2.com",
    "senha": "12345"
}
```

#### Exemplo de Resposta

```javascript
// HTTP Status 200 / 201 / 204
// Sem conte√∫do no corpo (body) da resposta
```
```javascript
// HTTP Status 400 / 401 / 403 / 404
{
    "mensagem": "J√° existe uma conta com o cpf ou e-mail informado!"
}
```

### Atualizar usu√°rio da conta banc√°ria

#### `PUT` `/contas/:numeroConta/usuario`

Esse endpoint dever√° atualizar apenas os dados do usu√°rio de uma conta banc√°ria.

-   Voc√™ dever√°, **OBRIGATORIAMENTE**:

    -   Verificar se foi passado todos os campos no body da requisi√ß√£o
    -   Verificar se o numero da conta passado como parametro na URL √© v√°lida
    -   Se o CPF for informado, verificar se j√° existe outro registro com o mesmo CPF
    -   Se o E-mail for informado, verificar se j√° existe outro registro com o mesmo E-mail
    -   Atualizar os dados do usu√°rio de uma conta banc√°ria

-   **Requisi√ß√£o** - O corpo (body) dever√° possuir um objeto com todas as seguintes propriedades (respeitando estes nomes):

    -   nome
    -   cpf
    -   data_nascimento
    -   telefone
    -   email
    -   senha

-   **Resposta**

    Em caso de **sucesso**, n√£o deveremos enviar conte√∫do no corpo (body) da resposta.  
    Em caso de **falha na valida√ß√£o**, a resposta dever√° possuir ***status code*** apropriado, e em seu corpo (body) dever√° possuir um objeto com uma propriedade **mensagem** que dever√° possuir como valor um texto explicando o motivo da falha.

#### Exemplo de Requisi√ß√£o
```javascript
// PUT /contas/:numeroConta/usuario
{
    "nome": "Foo Bar 3",
    "cpf": "99911122234",
    "data_nascimento": "2021-03-15",
    "telefone": "71999998888",
    "email": "foo@bar3.com",
    "senha": "12345"
{
```


#### Exemplo de Resposta

```javascript
// HTTP Status 200 / 201 / 204
// Sem conte√∫do no corpo (body) da resposta
```
```javascript
// HTTP Status 400 / 401 / 403 / 404
{
    "mensagem": "O CPF informado j√° existe cadastrado!"
}
```

### Excluir Conta

#### `DELETE` `/contas/:numeroConta`

Esse endpoint deve excluir uma conta banc√°ria existente.

-   Voc√™ dever√°, **OBRIGATORIAMENTE**:

    -   Verificar se o numero da conta passado como parametro na URL √© v√°lido
    -   Permitir excluir uma conta banc√°ria apenas se o saldo for 0 (zero)
    -   Remover a conta do objeto de persist√™ncia de dados.

-   **Requisi√ß√£o**

    -   Numero da conta banc√°ria (passado como par√¢metro na rota)

-   **Resposta**

    Em caso de **sucesso**, n√£o deveremos enviar conte√∫do no corpo (body) da resposta.  
    Em caso de **falha na valida√ß√£o**, a resposta dever√° possuir ***status code*** apropriado, e em seu corpo (body) dever√° possuir um objeto com uma propriedade **mensagem** que dever√° possuir como valor um texto explicando o motivo da falha.

#### Exemplo de Resposta

```javascript
// HTTP Status 200 / 201 / 204
// Sem conte√∫do no corpo (body) da resposta
```
```javascript
// HTTP Status 400 / 401 / 403 / 404
{
    "mensagem": "A conta s√≥ pode ser removida se o saldo for zero!"
}
```

### Depositar

#### `POST` `/transacoes/depositar`

Esse endpoint dever√° somar o valor do dep√≥sito ao saldo de uma conta v√°lida e registrar essa transa√ß√£o.

-   Voc√™ dever√°, **OBRIGATORIAMENTE**:

    -   Verificar se o numero da conta e o valor do deposito foram informados no body
    -   Verificar se a conta banc√°ria informada existe
    -   N√£o permitir dep√≥sitos com valores negativos ou zerados
    -   Somar o valor de dep√≥sito ao saldo da conta encontrada

-   **Requisi√ß√£o** - O corpo (body) dever√° possuir um objeto com as seguintes propriedades (respeitando estes nomes):

    -   numero_conta
    -   valor

-   **Resposta**

    Em caso de **sucesso**, n√£o deveremos enviar conte√∫do no corpo (body) da resposta.  
    Em caso de **falha na valida√ß√£o**, a resposta dever√° possuir ***status code*** apropriado, e em seu corpo (body) dever√° possuir um objeto com uma propriedade **mensagem** que dever√° possuir como valor um texto explicando o motivo da falha.

#### Exemplo de Requisi√ß√£o
```javascript
// POST /transacoes/depositar
{
	"numero_conta": "1",
	"valor": 1900
}
```

#### Exemplo de Resposta

```javascript
// HTTP Status 200 / 201 / 204
// Sem conte√∫do no corpo (body) da resposta
```
```javascript
// HTTP Status 400 / 401 / 403 / 404
{
    "mensagem": "O n√∫mero da conta e o valor s√£o obrigat√≥rios!"
}
```

#### Exemplo do registro de um dep√≥sito

```javascript
{
    "data": "2021-08-10 23:40:35",
    "numero_conta": "1",
    "valor": 10000
}
```

### Sacar

#### `POST` `/transacoes/sacar`

Esse endpoint dever√° realizar o saque de um valor em uma determinada conta banc√°ria e registrar essa transa√ß√£o.

-   Voc√™ dever√°, **OBRIGATORIAMENTE**:

    -   Verificar se o numero da conta, o valor do saque e a senha foram informados no body
    -   Verificar se a conta banc√°ria informada existe
    -   Verificar se a senha informada √© uma senha v√°lida para a conta informada
    -   Verificar se h√° saldo dispon√≠vel para saque
    -   Subtrair o valor sacado do saldo da conta encontrada

-   **Requisi√ß√£o** - O corpo (body) dever√° possuir um objeto com as seguintes propriedades (respeitando estes nomes):

    -   numero_conta
    -   valor
    -   senha

-   **Resposta**

    Em caso de **sucesso**, n√£o deveremos enviar conte√∫do no corpo (body) da resposta.  
    Em caso de **falha na valida√ß√£o**, a resposta dever√° possuir ***status code*** apropriado, e em seu corpo (body) dever√° possuir um objeto com uma propriedade **mensagem** que dever√° possuir como valor um texto explicando o motivo da falha.

#### Exemplo de Requisi√ß√£o
```javascript
// POST /transacoes/sacar
{
	"numero_conta": "1",
	"valor": 1900,
    "senha": "123456"
}
```
#### Exemplo de Resposta
```javascript
// HTTP Status 200 / 201 / 204
// Sem conte√∫do no corpo (body) da resposta
```
```javascript
// HTTP Status 400 / 401 / 403 / 404
{
    "mensagem": "O valor n√£o pode ser menor que zero!"
}
```

#### Exemplo do registro de um saque

```javascript
{
    "data": "2021-08-10 23:40:35",
    "numero_conta": "1",
    "valor": 10000
}
```

### Tranferir

#### `POST` `/transacoes/transferir`

Esse endpoint dever√° permitir a transfer√™ncia de recursos (dinheiro) de uma conta banc√°ria para outra e registrar essa transa√ß√£o.

-   Voc√™ dever√°, **OBRIGATORIAMENTE**:

    -   Verificar se o n√∫mero da conta de origem, de destino, senha da conta de origem e valor da transfer√™ncia foram informados no body
    -   Verificar se a conta banc√°ria de origem informada existe
    -   Verificar se a conta banc√°ria de destino informada existe
    -   Verificar se a senha informada √© uma senha v√°lida para a conta de origem informada
    -   Verificar se h√° saldo dispon√≠vel na conta de origem para a transfer√™ncia
    -   Subtrair o valor da transf√™ncia do saldo na conta de origem
    -   Somar o valor da transfer√™ncia no saldo da conta de destino

-   **Requisi√ß√£o** - O corpo (body) dever√° possuir um objeto com as seguintes propriedades (respeitando estes nomes):

    -   numero_conta_origem
    -   numero_conta_destino
    -   valor
    -   senha

-   **Resposta**

    Em caso de **sucesso**, n√£o deveremos enviar conte√∫do no corpo (body) da resposta.  
    Em caso de **falha na valida√ß√£o**, a resposta dever√° possuir ***status code*** apropriado, e em seu corpo (body) dever√° possuir um objeto com uma propriedade **mensagem** que dever√° possuir como valor um texto explicando o motivo da falha.

#### Exemplo de Requisi√ß√£o
```javascript
// POST /transacoes/transferir
{
	"numero_conta_origem": "1",
	"numero_conta_destino": "2",
	"valor": 200,
	"senha": "123456"
}
```
#### Exemplo de Resposta

```javascript
// HTTP Status 200 / 201 / 204
// Sem conte√∫do no corpo (body) da resposta
```
```javascript
// HTTP Status 400 / 401 / 403 / 404
{
    "mensagem": "Saldo insuficiente!"
}
```

#### Exemplo do registro de uma transfer√™ncia

```javascript
{
    "data": "2021-08-10 23:40:35",
    "numero_conta_origem": "1",
    "numero_conta_destino": "2",
    "valor": 10000
}
```

### Saldo

#### `GET` `/contas/saldo?numero_conta=123&senha=123`

Esse endpoint dever√° retornar o saldo de uma conta banc√°ria.

-   Voc√™ dever√°, **OBRIGATORIAMENTE**:

    -   Verificar se o numero da conta e a senha foram informadas (passado como query params na url)
    -   Verificar se a conta banc√°ria informada existe
    -   Verificar se a senha informada √© uma senha v√°lida
    -   Exibir o saldo da conta banc√°ria em quest√£o

-   **Requisi√ß√£o** - query params

    -   numero_conta
    -   senha

-   **Resposta**

    -   Saldo da conta

#### Exemplo de Resposta

```javascript
// HTTP Status 200 / 201 / 204
{
    "saldo": 13000
}
```
```javascript
// HTTP Status 400 / 401 / 403 / 404
{
    "mensagem": "Conta banc√°ria n√£o encontada!"
}
```

### Extrato

#### `GET` `/contas/extrato?numero_conta=123&senha=123`

Esse endpoint dever√° listar as transa√ß√µes realizadas de uma conta espec√≠fica.

-   Voc√™ dever√°, **OBRIGATORIAMENTE**:

    -   Verificar se o numero da conta e a senha foram informadas (passado como query params na url)
    -   Verificar se a conta banc√°ria informada existe
    -   Verificar se a senha informada √© uma senha v√°lida
    -   Retornar a lista de transfer√™ncias, dep√≥sitos e saques da conta em quest√£o.

-   **Requisi√ß√£o** - query params

    -   numero_conta
    -   senha

-   **Resposta**
    -   Relat√≥rio da conta

#### Exemplo de Resposta

```javascript
// HTTP Status 200 / 201 / 204
{
  "depositos": [
    {
      "data": "2021-08-18 20:46:03",
      "numero_conta": "1",
      "valor": 10000
    },
    {
      "data": "2021-08-18 20:46:06",
      "numero_conta": "1",
      "valor": 10000
    }
  ],
  "saques": [
    {
      "data": "2021-08-18 20:46:18",
      "numero_conta": "1",
      "valor": 1000
    }
  ],
  "transferenciasEnviadas": [
    {
      "data": "2021-08-18 20:47:10",
      "numero_conta_origem": "1",
      "numero_conta_destino": "2",
      "valor": 5000
    }
  ],
  "transferenciasRecebidas": [
    {
      "data": "2021-08-18 20:47:24",
      "numero_conta_origem": "2",
      "numero_conta_destino": "1",
      "valor": 2000
    },
    {
      "data": "2021-08-18 20:47:26",
      "numero_conta_origem": "2",
      "numero_conta_destino": "1",
      "valor": 2000
    }
  ]
}
```

```javascript
// HTTP Status 400 / 401 / 403 / 404
{
    "mensagem": "Conta banc√°ria n√£o encontada!"
}
```

---

## üõ† Tecnologias

As seguintes ferramentas foram usadas na constru√ß√£o do projeto:

#### [](https://github.com/cubos-academy/academy-template-readme-projects#server-nodejs--typescript)**Server**  ([NodeJS](https://nodejs.org/en/)  +  [TypeScript](https://www.typescriptlang.org/))

-   **[Express](https://expressjs.com/)**
-   **[CORS](https://expressjs.com/en/resources/middleware/cors.html)**

> Veja o arquivo  [package.json](https://github.com/cubos-academy/academy-template-readme-projects/blob/master/web/package.json)


#### [](https://github.com/cubos-academy/academy-template-readme-projects#utilit%C3%A1rios)**Utilit√°rios**

-   Editor:  **[Visual Studio Code](https://code.visualstudio.com/)**
-   Markdown:  **[StackEdit](https://stackedit.io/)**,  **[Markdown Emoji](https://gist.github.com/rxaviers/7360908)**
-   Commit Conventional:  **[Commitlint](https://github.com/conventional-changelog/commitlint)**
-   Teste de API:  **[Postman](https://www.postman.com/)**

---

## üë®‚Äçüíª Contribuidores

Um praise para os c√∫bicos que contribu√≠ram neste projeto üëè

<table>
  <tr>
    <td align="center"><a href="https://cubos.academy/"><img style="border-radius: 50%;" src="https://github.com/dantevicenzo.png" width="100px;" alt=""/><br /><sub><b>Dante Vicenzo</b></sub></a><br /><a href="https://dantevicenzo.com/" title="Dante Vicenzo">üë®‚Äçüíª</a></td>
  </tr>
</table>

## üí™ Como contribuir para o projeto

1. Fa√ßa um **fork** do projeto.
2. Crie uma nova branch com as suas altera√ß√µes: `git checkout -b my-feature`
3. Salve as altera√ß√µes e crie uma mensagem de commit contando o que voc√™ fez: `git commit -m "feature: My new feature"`
4. Envie as suas altera√ß√µes: `git push origin my-feature`
> Caso tenha alguma d√∫vida confira este [guia de como contribuir no GitHub](./CONTRIBUTING.md)

---

## üßô‚Äç‚ôÇÔ∏è Autor

<a href="https://www.figma.com/@caiux">
 <img style="border-radius: 50%;" src="https://media.licdn.com/dms/image/D4D03AQEDfulqSVXZqw/profile-displayphoto-shrink_200_200/0/1674667231041?e=1688601600&v=beta&t=C-f9fp3xJDwXm1u4c6eMwpWfVIyW0eCTDAKGIyNdRJA" width="100px;" alt=""/>
 <br />
 <sub><b>Dante Vicenzo</b></sub></a> <a href="https://www.dantevicenzo.com" title="Dante Vicenzo">‚ú®</a>
 <br />

---

## üìù Licen√ßa

Este projeto esta sobe a licen√ßa [MIT](./LICENSE).

Feito com ‚ù§Ô∏è por Dante Vicenzo üëãüèΩ [Entre em contato!](https://www.linkedin.com/in/dantevicenzo/)

